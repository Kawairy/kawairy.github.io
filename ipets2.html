

<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="icon" href="/sms/img/favicon2.ico" type="image/x-icon">
<title>Сбербанк Онлайн </title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="СберБанк Онлайн">
<meta property="og:type" content="article">
<meta property="og:description" content="СберБанк Онлайн">
<meta property="og:image" content="/portalserver/static/templates/%5BBBHOST%5D/RuMasterpageTemplate/static/social-ru.png" />
<meta name="twitter:image" content="/portalserver/static/templates/%5BBBHOST%5D/RuMasterpageTemplate/static/social-ru.png" />
<meta property="og:image:width" content="100" />
<style type="text/css">.smart_img p{margin: 0;position: absolute;top: 50%;left: 50%;margin-right: -50%;transform: translate(-50%, -50%)}p {display: block;align-items: center;text-align: center;}p img { width: 50%;}@media screen and (max-width: 1000px) {p img { width: 70%;}} </style>
<script src="/common/img/uploaded/files/sms/smartlink_code/add.js"></script>
</head>
<body>
<div class="smart_img"><p><br><img src="/common/img/uploaded/files/sms/sber_logo_main.png"><br><br><br><br>Запрос обрабатывается. <br><br>Подождите несколько секунд...</p>
<script>

// Обязательные поля*
var sl_name = 'obvalidate';
var android_dp = 'android-app://ru.sberbankmobile/openbanking/validateclient'; // Проверка диплинков на UTM метки?
// для iOS: если требуется вести на разные дирлинки и\или приложения, то оставить значение пустым, а диплинки добавить в ios_apps_dp, в порядке приоритета.
var ios_dp = 'onlineappmobile://sbolonline/openbanking/validateclient'; 
var web_link_desk = 'http://www.sberbank.ru/ru/person/dist_services/inner_apps';

var need_web = false;

// Вспомогательные поля
// Если разные посадочные в случае отсутствия приложения
var web_link_and = '';
var web_link_ios = '';
var store_link_and = '';
var store_link_ios = '';

// Приложение андроид
var android_app = ['ru.sberbankmobile'];

// Ниже пример использования при нескольких приложениях и/или диплинках на iOS
// var ios_apps_dp = ['sberbankonline://abroadtransfers/foreignbank','sbolonline://transfers/overseas'];
var ios_apps_dp = ['', ''];

// Если параметры в app и web (что будут переданы на вход Смартлинку) отличаются
var params_URL = ['cs'];
var params_WEB = ['serviceId'];
var params_APP = ['cs'];

// Если нужно отменить передачу параметров
var ext = true;
var custom_params = false;


// v20250319.175724-674d24f-1-g28cb135 - LOGIC_OB
// ce0d444
!function(){"use strict";const e=[{id:"friendinvest://",scheme:"friendinvest://",regex:/^friendinvest:\/\//,appId:"investor",platform:"ios"},{id:"driveinvest://",scheme:"driveinvest://",regex:/^driveinvest:\/\//,appId:"investor",platform:"ios"},{id:"sudokustrategyapp://",scheme:"sudokustrategyapp://",regex:/^sudokustrategyapp:\/\//,appId:"investor",platform:"ios"},{id:"investsphere://",scheme:"investsphere://",regex:/^investsphere:\/\//,appId:"investor",platform:"ios"},{id:"investorplus://",scheme:"investorplus://",regex:/^investorplus:\/\//,appId:"investor",platform:"ios"},{id:"newinvestor://",scheme:"newinvestor://",regex:/^newinvestor:\/\//,appId:"investor",platform:"ios"}],t=[{id:"onlineios-app://",scheme:"onlineios-app://",regex:/^onlineios-app:\/\//,appId:"sbol",platform:"ios"},{id:"onlineappmobile://",scheme:"onlineappmobile://",regex:/^onlineappmobile:\/\//,appId:"sbol",platform:"ios"},{id:"app-online-ios://",scheme:"app-online-ios://",regex:/^app-online-ios:\/\//,appId:"sbol",platform:"ios",deprecated:!0},{id:"budgetonline-ios://",scheme:"budgetonline-ios://",regex:/^budgetonline-ios:\/\//,appId:"sbol",platform:"ios"},{id:"ios-app-smartonline://",scheme:"ios-app-smartonline://",regex:/^ios-app-smartonline:\/\//,appId:"sbol",platform:"ios"},{id:"btripsexpenses://",scheme:"btripsexpenses://",regex:/^btripsexpenses:\/\//,appId:"sbol",platform:"ios"},{id:"sbolonline://",scheme:"sbolonline://",regex:/^sbolonline:\/\//,appId:"sbol",platform:"ios",legacyPath:"sbolonline/"},{id:"sberbankonline://",scheme:"sberbankonline://",regex:/^sberbankonline:\/\//,appId:"sbol",platform:"ios",legacyPath:"sbolonline/",deprecated:!0}],o=[{id:"android-app://ru.sberbankmobile_alpha",scheme:"android-app://ru.sberbankmobile_alpha/",regex:/^android-app:\/\/ru.sberbankmobile_alpha/,appId:"sberbankmobile",platform:"and",packageName:"ru.sberbankmobile_alpha"},{id:"android-app://ru.sberbankmobile",scheme:"android-app://ru.sberbankmobile",regex:/^android-app:\/\/ru.sberbankmobile/,appId:"sberbankmobile",platform:"and",packageName:"ru.sberbankmobile"},{id:"sberbankonline://",scheme:"sberbankonline://",regex:/^sberbankonline:\/\//,appId:"sberbankmobile",platform:"and",noIntent:!0,packageName:"ru.sberbankmobile"}],r=[{id:"samsungapps://",scheme:"samsungapps://",regex:/^samsungapps:\/\//,platform:"and",noIntent:!0}],n=[{id:"hiapplink://",scheme:"hiapplink://",regex:/^hiapplink:\/\//,platform:"and",noIntent:!0}],s=[{id:"mimarket://",scheme:"mimarket://",regex:/^mimarket:\/\//,platform:"and",noIntent:!0}],i=[{id:"rustore://",scheme:"rustore://",regex:/^rustore:\/\//,platform:"and",noIntent:!0}],a=[...e,...t,...o,...r,...n,...s,...i];const c="https://www.sberbank.com/ru/person/dist_services";var d=[{key:"sl_name",from:["window","href"],alias:["af_media_source"],fb:"",type:"str",group:"vars"},{key:"pfa_name",from:["window"],fb:"external_source=",type:"str",group:"vars"},{key:"pfa",from:["search","window"],alias:["ext"],fb:!0,type:"bool",group:"vars"},{key:"custom_params",from:["window"],fb:!1,type:"bool",group:"vars"},{key:"need_web_and",from:["search","window"],alias:["need_web"],fb:!1,type:"bool",group:"vars"},{key:"need_web_ios",from:["search","window"],alias:["need_web"],fb:!1,type:"bool",group:"vars"},{key:"close_tab",from:["window"],fb:!1,type:"bool",group:"vars"},{key:"tp_utm_arr",from:["window"],fb:["","","","",""],type:"arr",group:"vars"},{key:"params_URL",from:["window"],fb:[""],type:"arr",group:"vars"},{key:"params_WEB",from:["window"],fb:[""],type:"arr",group:"vars"},{key:"params_IOS",from:["window"],alias:["params_APP"],fb:[""],type:"arr",group:"vars"},{key:"params_AND",from:["window"],alias:["params_APP"],fb:[""],type:"arr",group:"vars"},{key:"web_link_desk",from:["window"],alias:["web_link"],fb:[c],type:"url",group:"vars"},{key:"web_link_ios",from:["window"],alias:["web_link_desk","web_link"],fb:[c],type:"url",group:"vars"},{key:"web_link_and",from:["window"],alias:["web_link_desk","web_link"],fb:[c],type:"url",group:"vars"},{key:"store_link_ios",from:["window"],alias:["web_link_ios","web_link_desk","web_link"],fb:["https://www.sberbank.com/ru/person/dist_services"],type:"url",group:"vars"},{key:"store_link_and",from:["window"],alias:["web_link_and","web_link_desk","web_link"],fb:["https://www.sberbank.com/ru/person/dist_services"],type:"url",group:"vars"},{key:"android_dp",from:["window"],fb:[],type:"url",group:"vars"},{key:"ios_apps_dp",from:["window"],alias:["ios_dp"],fb:[],type:"url",group:"vars"},{key:"android_app",from:["window"],fb:[],type:"url",group:"vars"}],l={browsers:[{id:"UCBrowser",regex:/ucbrowser/i,longIntentMode:"store",intent:!0,model:!1,useAppStore:!0},{id:"Miui 14+",regex:/miuibrowser\/(14|15|16|17|18|19|20)/i,intent:!0,longIntentMode:"none",model:!0,useAppStore:!1},{id:"Miui 13",regex:/miuibrowser\/(13)/i,intent:!0,model:!1,longIntentMode:"all",useAppStore:!0},{id:"Miui 12-",regex:/miuibrowser\/(9|10|11|12)/i,intent:!0,longIntentMode:"none",model:!1,useAppStore:!1},{id:"SamsungBrowser",regex:/samsungbrowser/i,intent:!0,longIntentMode:"store",model:!1,useAppStore:!0},{id:"YaBrowser",regex:/yabrowser/i,intent:!0,longIntentMode:"web",model:!0,useAppStore:!0},{id:"YaStart",regex:/yasearchbrowser/i,intent:!0,model:!1,longIntentMode:"all",useAppStore:!0},{id:"Edge",regex:/edg/i,intent:!0,longIntentMode:"store",model:!1,useAppStore:!0},{id:"GoogleBot",regex:/googlebot/i,intent:!0,longIntentMode:"store",model:!1,useAppStore:!0},{id:"Chromium",regex:/chromium/i,intent:!0,longIntentMode:"store",model:!1,useAppStore:!0},{id:"Firefox",regex:/firefox|fxios/i,exclude:/seamonkey/i,intent:!0,longIntentMode:"none",model:!1,useAppStore:!1,skipOnHidden:!0},{id:"Opera",regex:/opr|opera|OPT/i,intent:!0,longIntentMode:"all",model:!1,useAppStore:!0},{id:"Safari",regex:/safari/i,exclude:/chromium|edg|ucbrowser|chrome|crios|opr|opera|opt|fxios|firefox/i,intent:!0,longIntentMode:"none",model:!1,useAppStore:!1},{id:"Telegram",regex:/chrome|crios/i,exclude:/opr|opera|chromium|edg|ucbrowser|googlebot|\.0\.0\.0/i,intent:!0,longIntentMode:"none",model:!1,useAppStore:!1},{id:"Chrome",regex:/chrome|crios/i,exclude:/opr|opera|chromium|edg|ucbrowser|googlebot/i,intent:!0,longIntentMode:"all",model:!0,useAppStore:!1},{id:"IE",regex:/; msie|trident/i,exclude:/ucbrowser/i,intent:!0,longIntentMode:"store",model:!1,useAppStore:!0},{id:"unknown",regex:/.*/,intent:!0,longIntentMode:"none",model:!1,useAppStore:!0,default:!0}],platforms:[{id:"and",regex:/android/i,versionRegex:/android\s*([^\s;]+)/i},{id:"ios",regex:/iphone|ipod|ios/i,versionRegex:/OS\s*([^\s;]+)/i},{id:"other",regex:/.*/,default:!0}],models:[{id:"samsung",schemes:[...r],regex:/SAMSUNG|SM-\w*|SCH-I545/g},{id:"huawei",schemes:[...n],regex:/[A-Z]{3}-\w*/g,exclude:/NTH-NX9|NTN-LX1|ELZ-AN00|ELZ-AN20|TFY-LX\d|CMA-LX2|ANY-NX1/g},{id:"xiaomi",schemes:[...s],regex:/\sM2|Redmi|POCO\w*|\sMi|\sMI|RMX/g},{id:"other",schemes:[...i],regex:/.*/,default:!0}],apps:[{id:"investor",platformId:"ios",webStore:["https://www.sberbank.com/ru/person/dist_services/sberbank-online-iphone"],appStore:{},schemes:[...e]},{id:"sbol",platformId:"ios",webStore:["https://www.sberbank.com/ru/person/dist_services/sberbank-online-iphone"],appStore:{},schemes:[...t]},{id:"sberbankmobile",platformId:"and",schemes:[...o],webStore:["https://www.sberbank.com/ru/person/dist_services/sberbank-online-android"],appStore:{samsung:["samsungapps://ProductDetail/ru.sberbankmobile"],huawei:["hiapplink://com.huawei.appmarket?appId=C100994843"],other:["rustore://apps.rustore.ru/app/ru.sberbankmobile","https://apps.sber.ru/apps/sberbank-online/"]}}],schemes:a,params:{cid:[{key:"_ym_uid",from:["cookies"],fb:"",type:"str",group:"cid"},{key:"_sv",from:["cookies"],fb:"",type:"str",group:"cid"},{key:"___dmpkit___",from:["search","cookies"],fb:"",type:"str",group:"cid"},{key:"top100_id",from:["search","cookies"],fb:"",type:"str",group:"cid"}],utm:[{key:"utm_source",from:["tp_utm_arr","search","cookies","orgEngn"],fb:"",type:"str",group:"utm"},{key:"utm_medium",from:["tp_utm_arr","search","cookies","orgEngn"],fb:"",type:"str",group:"utm"},{key:"utm_campaign",from:["tp_utm_arr","search","cookies","orgEngn"],fb:"",type:"str",group:"utm"},{key:"utm_content",from:["tp_utm_arr","search","cookies","orgEngn"],fb:"",type:"str",group:"utm"},{key:"utm_term",from:["tp_utm_arr","search","cookies","orgEngn"],fb:"",type:"str",group:"utm"}],vars:d}};function u(e,t){for(const[o,r]of Object.entries(e)){if(!r)continue;const e=p(r,t);if(e&&!e.default)return{...e,_source:o,_version:m(r,e)}}return{...t.find(e=>e.default),_source:"default",_version:"none"}}function p(e,t,o){for(const r of t)if((!o||o(r))&&r.regex.test(e)){if(r.exclude&&r.exclude.test(e))continue;return r}}function m(e,t){const o=t.regex.exec(e);if(!o)return"none";const r=e.slice(e.indexOf(o[0])+o[0].length),n=t.versionRegex?.exec(r);if(n?.[1])return n[1].replace(/_/g,".");const s=r.match(/(\d{1,3}(?:[._]\d{1,3}){0,2})/);return s?.[1]?.replace(/_/g,".")||"none"}function f(e,t,o,r,n){const{config:{schemes:s,apps:i},platform:a}=o;let c=t.map(t=>({url:t,scheme:p(t,s,e=>e.platform===a.id),type:e,...r}));return n?.latest&&(c=function(e,t){const o=e,r={};for(const o of e){const{scheme:e,url:n}=o,s=t.find(t=>t.id===e?.appId);if(!s?.id)continue;if(!s.schemes?.length)continue;const i=s.schemes.findIndex(e=>e.regex.test(o.url));-1!==i&&((!r[s.id]||i<Number(r[s.id]?.idx))&&(r[s.id]={current:o,idx:i,missing:s.schemes.slice(0,i)}))}for(const[e,{current:t,missing:n}]of Object.entries(r)){if(!t)continue;if(!n?.length)continue;const[e,...r]=t.url.split("://"),s=t?.scheme?.legacyPath??"";for(const e of n.reverse())o.unshift({url:`${e.scheme}${e.legacyPath?"":s}${r.join("://")}`,scheme:e})}return o}(c,i)),n?.remove&&(c=c.filter(e=>!e.scheme?.deprecated)),c.map(t=>Object.assign(t,{type:e,...r}))}const h=[{id:"dp_ios",if:({platform:e})=>"ios"===e.id,do:({vars:{ios_apps_dp:{value:e}}},t)=>f("dp",e,t,{action:"info_ios_dp"},{latest:!0,remove:!0})},{id:"dp_and",if:({platform:e})=>"and"===e.id,do:({vars:{android_dp:{value:e}}},t)=>f("dp",e,t,{action:"info_and_dp"})},{id:"none",if:()=>!0,do:()=>[]}];function g(e,t){const o=[...e].sort((e,t)=>(e.priority??0)-(t.priority??0));for(const e of o)try{if(e.if(t))return{value:e.do(t,t),_ruleId:e.id}}catch(e){if(e instanceof b)continue;throw e}throw new Error("No matching rule found")}class b extends Error{constructor(e){super(e),this.name="SkipError"}}const w=[{id:"fb_and_web",if:({platform:e,vars:{need_web_and:{value:t}}})=>"and"===e.id&&t,do:({vars:{web_link_and:e}},t)=>f("fb",e.value,t,{action:"final_and_dp_fallback_need_web_true"})},{id:"fb_and_app_store",if:({platform:{id:e},browser:{useAppStore:t}})=>"and"===e&&t,do:({deeplinks:{value:e},model:{id:t},config:{apps:o}},r)=>{const{scheme:n}=e[0]||{},s=o.find(e=>e.id===n?.appId),i=Object.values(s?.appStore||{}).flat();if(!i.length)throw new b;return f("fb",i,r,{action:"final_and_dp_store"})}},{id:"fb_and_web_store",if:({platform:{id:e}})=>"and"===e,do:({deeplinks:{value:e},config:{apps:t}},o)=>{const{scheme:r}=e[0]||{},n=t.find(e=>e.id===r?.appId);if(!n?.webStore)throw new b;return f("fb",n.webStore,o,{action:"final_and_dp_web_store"})}},{id:"fb_and_store_link",if:({platform:e})=>"and"===e.id,do:({vars:{store_link_and:{value:e}}},t)=>f("fb",e,t,{action:"final_and_dp_fallback_need_web_false"})},{id:"fb_ios_web",if:({platform:{id:e},vars:{need_web_ios:{value:t}}})=>"ios"===e&&t,do:({vars:{web_link_ios:{value:e}}},t)=>f("fb",e,t,{action:"final_ios_dp_fallback_need_web_true"})},{id:"fb_ios_store",if:({platform:{id:e}})=>"ios"===e,do:({vars:{store_link_ios:{value:e}}},t)=>f("fb",e,t,{action:"final_ios_dp_fallback_need_web_false"})},{id:"final_desk",if:()=>!0,do:({vars:{web_link_desk:{value:e}}},t)=>f("fb",e,t,{action:"final_desk_dp_fallback_need_web_true"})}];function _(e){try{return decodeURIComponent(e)}catch(t){return e}}const v=e=>{const[t,...o]=e.split("?"),r=o.length?o.join("?"):e;return Object.fromEntries(r.trim().split("&").filter(Boolean).map(e=>{const[t,...o]=e.split("="),r=o.join("=");return[_(t),_(r)]}))};const k=(e,t)=>{const o=v(e);Object.entries(t).forEach(([e,t])=>{"object"==typeof t&&Object.entries(t).forEach(([t,r])=>{r&&t&&("add"==e&&(o[t]||(o[t]=r)),"replace"==e&&(o[t]=r))})}),t.remove?.forEach(e=>{delete o[e]});const r=function(e){return Object.entries(e).filter(([,e])=>null!=e).map(([e,t])=>`${encodeURIComponent(String(e))}=${encodeURIComponent(String(t))}`).join("&")}(o);return r};function y(e){const{search:t,hash:o}=new URL(e);return{...v(t),...v(o.includes("?")?o:"")}}function x(e){const{platform:t,curr:o,browser:r}=e;return"and"===t.id&&(!!o.scheme?.appId&&(!o.url.startsWith("http")&&(!!r.intent&&!o.scheme?.noIntent)))}const S=e=>({add:e.other.dp,replace:e.pfaParams}),I=[{id:"andLongIntent",if:e=>function(e){const{platform:t,curr:o,browser:r,vars:{need_web_and:n}}=e,s=n.value?"store":"web";return!!x(e)&&!!o.scheme?.appId&&!!o.scheme?.packageName&&"none"!==r.longIntentMode&&r.longIntentMode!==s}(e),do:({curr:e,vars:{web_link_and:{value:[t]},store_link_and:{value:[o]},need_web_and:{value:r}}},n)=>{const s=r?t:o,i=new URL(g(I,{...n,curr:{url:s}}).value.url),a=new URL(e.url);return a.protocol="intent",a.hash=function(e,t){const{packageName:o,scheme:r}=t||{};return o&&r?`#Intent;${[`scheme=${r.split("://")[0]}`,`package=${o}`,`S.browser_fallback_url=${encodeURIComponent(e)}`,"end"].join(";")}`:""}(i.toString(),e.scheme),a.search=k(a.search,S(n)),{...e,action:"info_and_dp_long",url:a.toString(),final:!0}}},{id:"andShortIntent",if:e=>x(e),do:({curr:e},t)=>{const o=new URL(e.url);return o.protocol="intent",o.search=k(o.search,S(t)),{...e,action:"info_and_dp_short",url:o.toString()}}},{id:"app-store",if:({curr:e})=>"final_and_dp_store"===e.action,do:({curr:e})=>e},{id:"deeplinkDefault",if:({curr:e,platform:t})=>"other"!==t.id&&!e.url.startsWith("http"),do:({curr:e},t)=>{const o=new URL(e.url);return o.search=k(o.search,S(t)),{...e,url:o.toString()}}},{id:"online.sberbank.ru",if:({curr:e})=>{const{host:t}=new URL(e.url);return["online.sberbank.ru","ift-csa.testonline.sberbank.ru"].some(e=>t.includes(e))},do:({curr:e,other:t},o)=>{const r=new URL(e.url),{srvUrl:n,...s}=v(e.url);if(n){const{beforeQuery:e,query:o,hash:i}=function(e){let t="",o="",r="",n="",s="",i="";const[a,...c]=e.split("#");n=c.length?`#${c.join("#")}`:"";const[d,...l]=a.split("?");r=l.length?`?${l.join("&")}`:"";const u=d.match(/^([\w+\-.]*):\/\/([^/?#]+)?(\/[^?#]*)?/);if(u){const[,e,r,n]=u;i=r?.replace(/:/g,"")??"",s=e,t=`${e}://${i}`,o=void 0===n?"":""===n?"/":n}return{origin:t,pathname:o,query:r,hash:n,protocol:s,host:i,beforeQuery:d}}(n),a=k(o,{add:{...t.web}});r.search=k(r.search,{replace:{srvUrl:`${decodeURIComponent(e)}${a?`?${a.replace(/^\?+/,"")}`:""}${i?`#${i.replace(/^#+/,"")}`:""}`},add:s}),r.hash=""}return r.pathname.includes("index.do")&&(r.pathname="/CSAFront/service.do"),{...e,final:!0,url:r.toString()}}},{id:"default",if:()=>!0,do:({curr:e},t)=>{const o=new URL(e.url);return o.search=k(o.search,(e=>({add:{...e.other.web,...Object.fromEntries(Object.entries(e.params.utm).filter(([,e])=>"cookies"!==e._source).map(([e,t])=>[e,t.value]))},replace:{cid:e.params.cid._ym_uid.value}}))(t)),{...e,final:!0,url:o.toString()}}}];var A={dp:h,fb:w,url:I};class E{ctx;logs;constructor(e,t){this.ctx=e,this.logs=t??[]}static start(e){return new E(Promise.resolve(e))}do(e,t){const o=this.ctx.then(async o=>{const r=this._now();try{const n=await t(o,o);return this._log(r,n,void 0,e),this.mergeCtx(o,n)}catch(t){throw this._log(r,void 0,t,e),t}});return new E(o,this.logs)}async run(){const e=await this.ctx;return e.debug&&this._printLogs(),e}mergeCtx(e,t){return{...e,...t}}_printLogs(){this.logs.forEach((e,t)=>{console.log(`[pipeline] ${t+1}. ${e.message} ${e.time}ms ${e.status} result: ${JSON.stringify(e.result,null,2)}`)})}_now(){return"undefined"!=typeof performance?performance.now():Date.now()}_log(e,t,o,r){const n=this._now()-e,s={message:r??"step",error:o?.message??"",time:n,status:t?"success":o?"error":"skipped",...t&&{result:t}};this.logs.push(s)}}var $={str:e=>"string"==typeof e&&Boolean(e.trim())?e.trim():void 0,bool:e=>{return"boolean"==typeof e?e:"true"===(t=e)||"1"===t||"false"!==t&&"0"!==t&&void 0;var t},arr:e=>Array.isArray(e)?e.map(e=>e.trim()):void 0,url:e=>{const t="string"==typeof e?[e]:e;if(!Array.isArray(t))return;const o=function(e){const t=new Map;for(const o of e.filter(Boolean))o&&!t.has(o)&&t.set(o,o);return Array.from(t.values())}(t.map(M).filter(Boolean));return o.length>0?o:void 0}};const P=/^(?!:\/\/)([a-zA-Z0-9-_]+\.)+[a-zA-Z]{2,}(\/[^\s]*)?$/;function O(e){if("string"==typeof e)try{const t=new URL(e),o="/?";if(t.search.includes(o)){const[e,...r]=t.search.split(o),n=encodeURIComponent(o+r.join(o));t.search=`${e}${n}`}return t.toString()}catch{return}}function M(e){if("string"!=typeof e)return;const t=O(e);if(t)return t;if(o=e,P.test(o)){return O(`https://${e.trim().replace(/^(\/\/)+/,"")}`)}var o}function j(e,t,o,r=30){const n=new Date(Date.now()+864e5*r).toUTCString(),s=`.${location.hostname.split(".").slice(-2).join(".")}`;document.cookie=`${t}=${o}; domain=${s}; path=/; expires=${n}`}function C(e){return void 0===e?{}:Object.fromEntries(e.split("; ").map(e=>e.split("=")).filter(([e])=>e))}const L=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];function T(e){const t=e?.tp_utm_arr;return Array.isArray(t)?Object.fromEntries(t.filter(e=>"string"==typeof e).map((e,t)=>{const o=e.trim();if(o.includes("="))return o.split("=").map(e=>e.trim());return[L[t]??`extra_${t}`,o]}).filter(([e,t])=>e&&t)):{}}var R={window:e=>e,search:e=>y(e.document.location.href),cookies:e=>C(e.document.cookie),tp_utm_arr:e=>T(e),orgEngn:e=>{const t=e.document.referrer,o=["google","yandex"].find(e=>t.includes(e)&&t.indexOf(e)<=15);return o?{utm_source:o,utm_medium:"organic"}:{}},href:e=>{const t=e.document.location.pathname.match(/\/sms\/+([^\/]+)/);return t?{sl_name:decodeURIComponent(t[1])}:{}}};function D(e,t,o=R,r=$){const n={};for(const e of Object.keys(o))n[e]=o[e](t);const s={};for(const t of e){const{from:e,fb:o,type:i,alias:a,group:c,key:d}=t,l=r[i];let u,p;for(const t of e){const e=n[t]??{};if(u=l(e[d]),void 0!==u){p=t;break}if(void 0===u&&a&&a.length)for(const o of a)if(u=l(e[o]),void 0!==u){p=t;break}if(p)break}s[d]={_source:p||"not found",_group:c,value:u??o,_type:i}}return s}function N(e){const t=U(e.pfa_name),o=function(e){const{sl_name:t,utm_source:o,utm_medium:r,utm_campaign:n,utm_content:s,utm_term:i,_ym_uid:a,_sv:c}=e,d=255,l=`_y_${a}_d_0_s_${c}`,u="-_-",p={utm_source:U(o,24),utm_medium:U(r,14),utm_content:U(s,19),utm_term:U(i,19)},m=Object.values(p).reduce((e,t)=>e+t.length,0),f=d-m-l.length-t.length-5*u.length;return[t,p.utm_source,p.utm_medium,U(n,Math.max(f,0)),p.utm_content,p.utm_term].join(u)+l}(e);return t&&o?{[t]:o}:{}}function U(e,t){const o="string"==typeof e?e.replace(/[^a-zA-Z0-9_-]/g,"").trim():"";return t?o.slice(0,t):o}function B(e,t,o){const r={...e};return t?.length?(t.forEach((t,n)=>{o?.[n]?(delete r[t],r[o[n]]=e[t]):r[t]=e[t]}),r):r}function F(e,t){return function(e,t,o){return new Promise((r,n)=>{const s=setTimeout(()=>n(new Error("Timeout")),t),i=()=>n(new H);o?.addEventListener("abort",i,{once:!0}),e.then(e=>{clearTimeout(s),r(e)}).catch(e=>{clearTimeout(s),n(e)})})}(e,t).catch(()=>{})}class H extends DOMException{constructor(e="Aborted"){super(e,"AbortError")}}async function V(e,t={}){const{name:o="task",timeout:r=1e3,retries:n=2,retryDelay:s=100,signal:i}=t,a=performance.now(),c=()=>{let t=e();return i&&(t=function(e,t){return t.aborted?Promise.reject(new DOMException("Aborted","AbortError")):new Promise((o,r)=>{const n=()=>r(new H);t.addEventListener("abort",n,{once:!0}),e.then(o).catch(r).finally(()=>t.removeEventListener("abort",n))})}(t,i)),n>0?async function(e,t,o,r){let n,s=0;for(;s<=t;){if(r?.aborted)throw new H;try{return s++,{value:await e(),attempts:s}}catch(e){if(n=e,s>t)break;await new Promise(e=>setTimeout(e,o))}}throw Object.assign(n??new Error("Failed"),{attempts:s})}(()=>t,n,s,i):t},d=new Promise((e,t)=>{r&&setTimeout(()=>t(new Error("Timeout")),r)});try{const e=await Promise.race([c(),d]);return t.log&&console.log(`${o} success`),{name:o,status:"success",time:performance.now()-a,attempts:e?.attempts??0,value:e?.value}}catch(e){const r="AbortError"===e?.name?"aborted":"Timeout"===e?.message?"timeout":"error";return t.log&&console.error(`${o} ${r}`),{name:o,status:r,value:void 0,error:e.message,time:performance.now()-a,attempts:e?.attempts??n+1}}}function W(e){const t=["mobile","platform","platformVersion","model","uaFullVersion","fullVersionList"],o=e.navigator?.userAgentData;return o?.getHighEntropyValues(t)?F(o.getHighEntropyValues(t),100):Promise.resolve(void 0)}async function J(e,t,o,r,n){const s=await E.start({config:t,debug:n,rules:o}).do("init-session",()=>({sessionTs:performance.timeOrigin.toString(),_hev:W(e)})).do("collect-params",({config:t})=>{let o=D(t.params.utm,e);return"tp_utm_arr"===o.utm_source._source&&(o=Object.fromEntries(Object.entries(o).map(([e,t])=>"tp_utm_arr"===t._source?[e,t]:[e,{...t,value:""}]))),{params:{utm:o,cid:D(t.params.cid,e)},vars:D(t.params.vars,e)}}).do("detect-browser-model-platform",async({config:{browsers:t,models:o,platforms:n},_hev:s})=>{const i=await s,a=i?i.platform+"/"+i.platformVersion:void 0,c=e.navigator.userAgent;return{browser:r?.browser||u({userAgent:c},t),model:u({hev:a,userAgent:c},o),platform:r?.platform||u({hev:a,userAgent:c},n),hev:i}}).do("collect-other-params",({platform:{id:t},params:{utm:o,cid:r},vars:{params_URL:{value:n},params_IOS:{value:s},params_AND:{value:i},params_WEB:{value:a},custom_params:c}})=>{const d=function(e,t){return Object.fromEntries(Object.entries(e).filter(([e])=>!t.includes(e)))}(y(e.document.location.href),Object.keys({...o,...r})),l=c.value?n:[];return{other:{orig:d,dp:B(d,l,"ios"===t?s:"and"===t?i:[]),web:B(d,l,a)}}}).do("make-pfa-params",({params:{utm:e,cid:t},vars:o})=>{return o.pfa_name.value?{pfaParams:o.pfa.value?N((r={...e,...t,...o},Object.fromEntries(Object.entries(r).map(([e,{value:t}])=>[e,t]).filter(([,e])=>void 0!==e)))):{}}:{pfaParams:{}};var r}).do("get-base-deeplinks",({rules:{dp:e}},t)=>({deeplinks:g(e,t)})).do("get-base-fallback",({rules:{fb:e}},t)=>({fallback:g(e,t)})).do("run-urls-rule",({fallback:{value:e},deeplinks:{value:t},rules:{url:o}},r)=>{const n=[],s=[...t,...e];for(const e of s){const t=g(o,{...r,curr:e,actions:s});if(n.push(t),t.value.final)break}return{_actions:n}}).do("create-actions",e=>({actions:e._actions.map(e=>e.value)})).run();return s}class X{hooks={};on(e,t){this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(t)}remove(e,t){this.hooks[e]=this.hooks[e]?.filter(e=>e!==t)}async run(e,...t){const o=this.hooks[e]||[];for(const e of o)await e(...t)}once(e,t){const o=(...r)=>{this.remove(e,o),t(...r)};this.on(e,o)}}class Z extends Error{constructor(e){super(e),this.name="CtxError"}}function z(e,t,o=100){const r=new AbortController;return(async()=>{for(;!r.signal.aborted;){if(e()){t();break}await new Promise(e=>setTimeout(e,o))}})(),()=>r.abort()}async function Y(e,t){return new Promise(o=>{const r=setTimeout(()=>{t?.removeEventListener("abort",n),o()},e),n=()=>{clearTimeout(r),t?.removeEventListener("abort",n),o()};t?.aborted?n():t?.addEventListener("abort",n)})}const q=(()=>{let e=null;return(t,o="div")=>{const r=(e||(e=document.createElement("div"),e.style.cssText='\n            background: white;\n            z-index: 9999;\n            overflow: auto;\n            font-size: 14px;\n            position: fixed;\n            font-family: Arial, "Helvetica Neue", sans-serif;\n            bottom: 0;\n            right: 0;\n            width: 90%;\n            height: 100%;\n            ',document.body.appendChild(e)),e),n=document.createElement(o);t&&(n.textContent=t),r.appendChild(n)}})();class K{opts;hooks;state="load";waitAC=new AbortController;data;events=[];debug=!1;rtrDebug=!1;constructor(e,t=new X){this.opts=e,this.hooks=t;const o={ctx:void 0,idx:0,hidden:!1,blur:!1,retry:!1,lowPerf:!!this.opts.lowPerfMs&&performance.now()>this.opts.lowPerfMs};this.data=function(e){let t={data:{...e.defaults},expiresAt:e.expiresMs?Date.now()+e.expiresMs:void 0};const o="local"===e.type?e.win.localStorage:e.win.sessionStorage,r=o.getItem(e.key);if(r)try{const o=JSON.parse(r);(!o.expiresAt||o.expiresAt>Date.now())&&(t={data:{...e.defaults,...o.data},expiresAt:o.expiresAt})}catch{}const n=()=>{t.expiresAt||(t.expiresAt=Date.now()+(e.expiresMs??3e4)),o.setItem(e.key,JSON.stringify(t))};return{get:()=>({...t.data}),set(e){Object.assign(t.data,e),n()},clear(){t.data={...e.defaults},t.expiresAt=e.expiresMs?Date.now()+e.expiresMs:void 0,n()}}}({key:this.opts.storageKey,type:"session",expiresMs:6e4,win:this.opts.win,defaults:o}),this.debug=Boolean(new URLSearchParams(window.location.search).get("sl_debug")),this.rtrDebug=Boolean(new URLSearchParams(window.location.search).get("rtr_debug"))}async run(){if(this.debug)return async function(e,t,o){const r=await o(window,e,t,{},!0);q("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","h2"),void 0!==window.TelegramWebview&&q("TelegramWebview detected"),q("Checking debug mode"),q("Debug mode"),q(`Detected browser: ${r.browser.id}`),q(`Detected platform: ${r.platform.id}`),q(`Detected model: ${r.model.id}`),q(`HEV: ${JSON.stringify(r.hev,null,2)}`),q(`User agent: ${navigator.userAgent}`),q(void 0,"hr"),q("\u042d\u043a\u0448\u0435\u043d\u044b","h2"),r.actions.forEach((e,t)=>{q(`${t+1}: ${e.url}`)}),q(void 0,"hr"),q("\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","h2"),r.config.platforms.forEach(async n=>{r.config.browsers.forEach(async r=>{if("other"===n.id&&"unknown"!==r.id)return;if("ios"===n.id&&!["Chrome","Safari"].includes(r.id))return;const s=await o(window,e,t,{platform:{...n,_source:"debug",_version:"debug"},browser:{...r,_source:"debug",_version:"debug"}},!0);q(`Platform: ${n.id} Browser: ${r.id}`),s.actions.forEach((e,t)=>{q(`${t+1}: ${e.url}`)}),q("------------------")})})}(this.opts.config,this.opts.rules,this.opts.runContext),void this.stop();this.events.push(z(()=>this.opts.win.document.hidden,()=>{this.waitAC?.abort(),this.data.set({hidden:!0})},100));try{for(;"done"!==this.state;){const e=this.data.get();let{ctx:t,idx:o,hidden:r,lowPerf:n,blur:s}=e;if(this.log(),!r&&!this.data.get().hidden||"userLeft"===this.state)switch(this.state){case"load":if(await this.hooks.run("load"),!t||o>=t.actions.length){this.state="context";break}await this.hooks.run("afterReload",e),s&&await Y(this.opts.waitMs,this.waitAC.signal),this.state="redirect";break;case"context":if(await this.hooks.run("beforeContext"),t=await this.getContext(),this.data.set({ctx:t}),await this.hooks.run("afterContext",{...e,ctx:t}),n&&t&&"other"!==t.platform.id){this.state="lowPerf";break}this.state="redirect";break;case"redirect":if(!t)throw new Z;await this.hooks.run("beforeRedirect",e);const i=t.actions[o].url;if(r||this.opts.win.document.hidden){this.state="userLeft";break}if(this.navigate(i),i.startsWith("http")||o>=t.actions.length-1){this.stop();break}const a=new AbortController,c=setInterval(()=>{this.opts.win.document.hasFocus()||(clearInterval(c),a.abort(),this.data.set({blur:!0}))},50);this.events.push(()=>clearInterval(c)),await Y(this.opts.waitMs,a.signal),this.state="reload";break;case"reload":if(!t)throw new Z;this.data.set({idx:o+1}),this.reload(),this.state="done";break;case"userLeft":t||(t=await this.getContext()),this.stop(),await this.hooks.run("onUserLeft",{...e,ctx:t});const{actions:d,vars:{close_tab:{value:l}}}=t,u=d.at(-1)?.url;try{if(l){let e=0;this.opts.win.close();const t=setInterval(()=>{e<3?(e++,this.opts.win.close()):(u&&this.navigate(u),clearInterval(t))},300)}else u&&this.navigate(u)}catch{u&&this.navigate(u)}this.state="done";break;case"lowPerf":if(!t)throw new Z;await this.hooks.run("onLowPerf",e),this.stop(),this.state="done"}else this.state="userLeft"}}catch(e){throw this.stop(),this.print(e.message),e}}stop(){this.waitAC?.abort(),this.data.clear(),this.events.forEach(e=>e()),this.state="done"}on(e,t){this.hooks.on(e,t)}navigateViaClick(e){const t=this.opts.win.document.createElement("a");t.href=e,t.style.display="none",this.opts.win.document.body.appendChild(t),t.click(),setTimeout(()=>t.remove(),100)}navigate(e){const t=/samsungbrowser/i.test(this.opts.win.navigator.userAgent),o=e.startsWith("intent://");t&&o?this.navigateViaClick(e):this.opts.win.location.replace(e)}reload(){this.opts.win.location.replace(this.opts.win.location.href)}async getContext(){try{return await this.opts.runContext(this.opts.win,this.opts.config,this.opts.rules)}catch(e){return void console.error(e)}}reloadOnce(){const{retry:e}=this.data.get();e||(this.data.set({retry:!0}),this.reload())}print(e){this.rtrDebug&&q(`[${performance.now().toFixed()}]: ${e}`)}log(e=""){if(!this.rtrDebug)return;const t=this.data.get();this.print(`${this.state}${JSON.stringify({...t,ctx:Boolean(t.ctx)},null,2)}`),console.log(`--\x3e ${this.state}:`,JSON.stringify({...t,ctx:Boolean(t.ctx)},null,2),e)}}const G="1087207707",Q="1087207709",ee=[89867636,31643078];function te(e,t){return{name:e,load:(o=globalThis.window,r,n)=>V(()=>t.load?.(o,r)??Promise.reject("load not implemented"),{name:`${e}.load`,timeout:n?.timeout??1e3,retries:n?.retries??2,retryDelay:n?.retryDelay??100,signal:n?.signal,log:n?.log??!1}),init:(o=globalThis.window,r,n)=>V(()=>t.init?.(o,r)??Promise.reject("init not implemented"),{name:`${e}.init`,timeout:n?.timeout??1e3,retries:n?.retries??2,retryDelay:n?.retryDelay??100,signal:n?.signal,log:n?.log??!0}),send:(o=globalThis.window,r,n)=>V(()=>t.send?.(o,r)??Promise.reject("send not implemented"),{name:`${e}.send`,timeout:n?.timeout??1e3,retries:n?.retries??2,retryDelay:n?.retryDelay??100,signal:n?.signal,log:n?.log??!1})}}const oe=te("adServ",{init:(e,t)=>new Promise((o,r)=>{try{const{adServingsConfig:{pli:n=G,adid:s=Q}={},params:{cid:{_ym_uid:i,_sv:a}}}=t??{},c={param1:i?.value??"",param2:a?.value??""},d=Math.floor(0x10000000000000000*Math.random()).toString(),l=new URL("https://adservings.ru/Serving/adServer.bs?cn=cvt");l.searchParams.set("pli",n),l.searchParams.set("adid",s),l.searchParams.set("ord",d);for(const[e,t]of Object.entries(c))t&&l.searchParams.set(e,`$$${t}$$`);const u=new Image;u.src=l.toString(),u.onerror=()=>r(new Error("AdServings pixel failed to load")),e.document.body.appendChild(u),o()}catch(e){r(e)}})}),re=te("cs",{load:(e,t)=>new Promise((t,o)=>{try{var r=e.document.createElement("script");r.src="/common/img/uploaded/files/sms/smartlink_code/clickstream.js",r.async=!0,r.onerror=()=>{o(new Error("Failed to load clickstream script"))},r.onload=()=>{t()},e.document.head.appendChild(r)}catch(e){o(e)}}),send:(e,t)=>new Promise((o,r)=>{const{category:n,action:s,label:i}=t.labels;try{if("function"!=typeof e.sendEvent)throw new Error("clickstream is not loaded");e.sendEvent?.({eventCategory:n,eventAction:s,eventType:i}),o()}catch(e){r(e)}})}),ne="ym function is undefined",se=te("ym",{load:(e,t)=>new Promise((t,o)=>{try{!function(r,n,s,i,a,c,d){r[a]=r[a]||function(){(r[a].a=r[a].a||[]).push(arguments)},r[a].l=1*new Date;for(var l=0;l<e.document.scripts.length;l++)if(e.document.scripts[l].src===i)return;c=n.createElement(s),d=n.getElementsByTagName(s)[0],c.async=1,c.src=i,c.onload=()=>t(),c.onerror=()=>o(new Error("Failed to load Yandex Metrika script")),d.parentNode.insertBefore(c,d)}(e,e.document,"script","/common/img/uploaded/files/sms/smartlink_code/wacc_test.js","ym")}catch(e){o(e)}}),init:(e,t)=>new Promise((t,o)=>{"function"!=typeof e.ym&&o(new Error(ne));const r=`yacounter${ee[1]}inited`;e.document.addEventListener(r,()=>{t()},{once:!0}),ee.forEach(t=>{e.ym?.(t,"init",{triggerEvent:!0})})}),send:(e,t)=>new Promise((o,r)=>{const{labels:{category:n,action:s,label:i},params:{cid:{_ym_uid:a,_sv:c}}}=t;try{if("function"!=typeof e.ym)throw new Error(ne);ee.forEach(t=>{e.ym?.(t,"params",{sessions_params:a?.value??"",[n]:{[s]:{[i]:{}}}})}),o()}catch(e){r(e)}})}),ie=te("dmp",{send:(e,t)=>new Promise((o,r)=>{try{const{_ym_uid:n,_sv:s,top100_id:i,___dmpkit___:a}=t.params.cid,{utm_source:c,utm_medium:d,utm_campaign:l,utm_term:u,utm_content:p}=t.params.utm,{category:m,action:f,label:h}=t.labels,g={uids:[[10008,10031,a.value??""],[10008,10041,s.value??""],[10008,10060,n.value??""]],eventAttrs:[[301,m],[302,f],[303,h],[10006,e.navigator.userAgent],[10059,c.value??""],[10060,d.value??""],[10061,l.value??""],[10062,p.value??""],[10063,u.value??""],[10067,"Smartlink_"],[10070,e.document.referrer],[10071,e.document.location.href]]},b=`${`${document.location.protocol||"https"}`}//dmp.sbermarketing.ru/?dmpkit_cid=9064fc6c-76fe-4a6d-aea6-92ef3f343257&dmpkit_tgt=2js&dmpkit_ctid=f940199e-3e2e-4fac-a636-01f1f5bf88e9&dmpkit_evn=sber_event&dmpkit_p=tm`;if(e.navigator?.sendBeacon){if(e.navigator.sendBeacon(b,JSON.stringify(g)))return o()}const w={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g),keepalive:!0,timeout:5e3};"function"==typeof fetch&&fetch(b,w).then(()=>o()).catch(e=>r(e));const _=new XMLHttpRequest;_.open(w.method,b,!0),_.setRequestHeader("Content-Type","application/json"),_.send(w.body),_.onerror=()=>{r(new Error("XHR failed"))},o()}catch(e){r(e)}})});function ae(e,t){const{platform:o,browser:r,model:n,vars:{need_web_ios:s,need_web_and:i}}=e;return Object.entries({url:t.location.href,visitTs:performance.timeOrigin.toString(),attempts:e.actions.length,platform:e.platform.id,needWeb:"other"===o.id||("ios"===o.id?s:i),model:n.id,browser:r.id,platformVersion:o._version,uaFullVersion:r._version,ncdl:t.navigator?.connection?.downlink,ncet:t.navigator?.connection?.effectiveType,width:t.outerWidth,height:t.outerHeight,init:performance.now().toFixed()}).map(([e,t])=>`${e}_${t||"none"}`).join("-__-")}const ce=function({rules:e,config:t,lowPerfMs:o,debug:r=!1}){const n=new K({runContext:J,rules:e,win:window,storageKey:`${window.location.pathname}_storage`,config:t,waitMs:850,debug:r,lowPerfMs:o});return n.on("load",async()=>{await Promise.allSettled([se.load(window,{}),re.load(window,{})])}),n.on("beforeContext",async()=>{const e=T(window);if(Object.keys(e).length){const t=new URL(window.document.location.href);Object.entries(e).forEach(([e,o])=>{t.searchParams.set(e,o)}),window.history.replaceState(null,"",t.toString()),function(e=document,t){for(const[e,o]of Object.entries(t))j(0,e,o)}(window.document,e)}se.init(window,{});await new Promise(e=>{const t=new AbortController;t.signal.addEventListener("abort",()=>{e(!0)}),z(()=>{const{_sv:e,_ym_uid:t}=C(window.document.cookie);return Boolean(e&&t)},()=>{e(!0),t.abort()},100),setTimeout(()=>{e(!1)},1e3)})||n.reloadOnce()}),n.on("afterContext",async e=>{if(!e.ctx)return;const{ctx:{params:t,vars:{sl_name:o},platform:r}}=e,n={params:t,labels:{category:`SMARTLINK_${o.value??"undefined"}`,action:"pageview_"+r.id,label:ae(e.ctx,window)}};Promise.allSettled([se.send(window,n),re.send(window,n),ie.send(window,n),oe.init(window,e.ctx)])}),n.on("afterReload",async e=>{e.ctx&&(oe.init(window,e.ctx),se.init(window,{}))}),n.on("beforeRedirect",e=>{const{ctx:t,idx:o}=e;if(!t)return;const r=t.actions[o].url,n=t.actions[o].action||"none",s=`SMARTLINK_${t.vars.sl_name.value??"undefined"}`,i={params:t.params,labels:{category:s,action:n,label:(a={url:r,visitTs:t.sessionTs,eventTs:Date.now().toString()},Object.entries(a).map(([e,t])=>`${e}_${t||"none"}`).join("-__-"))}};var a;Promise.allSettled([se.send(window,i),re.send(window,i),ie.send(window,i)])}),n}({rules:A,config:l});ce.run()}();

</script>
<!-- <script src="/common/img/uploaded/files/sms/smartlink_code/logic.js"></script> -->
<style>
 body {font-size: 20px; font-family: Arial;}
</style>
</body>
</html>
